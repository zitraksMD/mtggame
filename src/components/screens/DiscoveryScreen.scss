/* src/components/screens/DiscoveryScreen.scss */

// --- ОБЩИЕ СТИЛИ ЭКРАНА ---
.discovery-screen {
  // Новый фон: фиолетовый градиент (из код2)
  background: linear-gradient(135deg, #483D8B 0%, #6A5ACD 50%, #9370DB 100%);
  min-height: 100vh;
  width: 100%;
  color: #ffffff; // Основной цвет текста теперь белый для темного фона (из код2)
  overflow-y: auto; // Для прокрутки, если контент не помещается (из код2)
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
}

// --- НОВАЯ ШАПКА ---
.discovery-main-header {
  display: flex;
  // margin-top из код2 (с учетом safe-area)
  margin-top: max(
    80px,
    calc(45px + env(safe-area-inset-top, 0px))
  );
  justify-content: space-between;
  align-items: flex-start; // Из код2 (было align-items: center в некоторых частях код1)
  padding: 15px 20px; // Уменьшим немного отступы для компактности (из код2)
  width: 100%;
  box-sizing: border-box;

  .header-left-content {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 4px; // Отступ между элементами (из код2)

    .main-title { // Из код2 (новый элемент)
      font-size: 1.8em;
      color: #ffffff;
      margin: 0;
      font-weight: 700;
      letter-spacing: 0.5px;
    }

    // Nickname-frame из код1, стилизован и интегрирован с user-nickname из код2
    .nickname-frame {
      background-color: rgba(255, 255, 255, 0.1); // Из код1
      border: 1px solid rgba(255, 255, 255, 0.3);   // Из код1
      border-radius: 12px;                       // Из код1
      padding: 4px 12px;                         // Из код1
      margin-top: 8px;                           // Из код1, можно настроить или удалить, если gap из .header-left-content достаточен
      margin-bottom: 8px;                        // Из код1, отступ до прогресс-бара
      display: inline-block;                     // Из код1

      .user-nickname { // Стили для .user-nickname из код1, цвета/размеры можно адаптировать из код2 при необходимости
        color: #ffffff;         // Из код1 (белый цвет текста)
        font-weight: 500;       // Из код1
        margin: 0;              // Из код1 (убираем стандартные отступы параграфа)
        font-size: 0.95em;      // Размер из код2, можно оставить из код1 если нужно
        // color: #e0e0e0;      // Альтернативный цвет из код2
      }
    }


    .level-xp-progress-wrapper { // Из код2
      display: flex;
      align-items: center;
      gap: 8px;
      width: auto;
    }

    .level-badge { // Из код2
      font-size: 0.8em;
      font-weight: 600;
      color: #ffffff;
      background-color: rgba(0, 0, 0, 0.25);
      padding: 3px 7px;
      border-radius: 4px;
      white-space: nowrap;
    }

    .xp-bar-container { // Из код2
      width: 120px;
      height: 14px;
      background-color: rgba(0, 0, 0, 0.3);
      border-radius: 7px;
      overflow: hidden;
      position: relative;

      .xp-bar-fill { // Из код2
        height: 100%;
        background: #00bfff; // Ярко-голубой
        border-radius: 7px;
        transition: width 0.5s ease-in-out;
      }

      .xp-bar-text-on-bar { // Из код2
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        font-size: 0.7em;
        color: white;
        font-weight: bold;
        text-shadow: 1px 1px 1px rgba(0,0,0,0.5);
        white-space: nowrap;
      }
    }
  }

  .header-right-content {
    display: flex;
    align-items: center;
    gap: 10px;

    .header-icon-button {
      background: none;
      border: none;
      color: #fff;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%; // Это важно для круглого фона кнопки
      transition: background-color 0.2s ease;

      width: 40px;
      height: 40px;
      padding: 0;

      svg {
        font-size: 22px;
        display: block;
      }

      &:hover {
        background-color: rgba(255, 255, 255, 0.1); // Общий ховер для всех кнопок (если не переопределен)
      }

      // Специфичные стили для кнопки назад
      &.back-button {
        // --- ИЗМЕНЕНИЕ ЗДЕСЬ ---
        background: rgba(255,255,255,0.15); // Применяем фон к самой кнопке .back-button
        position: relative;
        bottom: 10px;

        // Убираем фон с SVG, если он там был по ошибке
        // svg {
        //   // background: transparent; // или просто удалить background отсюда
        //   // position: relative; // Оставляем, если нужно для точного выравнивания
        //   // bottom: 1px; // Ваше значение для выравнивания
        // }
        // Если смещение `bottom: 10px` было для компенсации фона на SVG, его нужно будет пересмотреть
        // Скорее всего, если выравнивание уже достигнуто, то position/bottom для SVG может быть не нужен или нужен другой

        // Если вы все еще нуждаетесь в пиксельной подгонке ПОСЛЕ исправления фона


        &:hover {
           background-color: rgba(255,255,255,0.3); // Специфичный ховер для кнопки назад
        }
      }

      // Для кнопки подарка - она будет без фона по умолчанию (прозрачная),
      // если не задать ей специфичный background.
      &.level-rewards-button {
        // Если хотите, чтобы у кнопки подарка тоже был фон, добавьте его здесь:
        // background: rgba(255,255,255,0.15); // Такой же фон, как у кнопки назад
        // &:hover {
        //   background-color: rgba(255,255,255,0.3);
        // }

        // Если нужно подкорректировать позицию иконки подарка:
        // svg {
        //   position: relative;
        //   top: 1px; // Пример
        // }
      }
    }
  }
}

// --- ТАБЫ ---
.discovery-tabs-container {
  display: flex;
  justify-content: space-around; // Из код1, код2 использует center. Выберите один.
  background-color: rgba(0, 0, 0, 0.15); // Полупрозрачный фон для табов (из код2)
  margin: 10px 20px 15px 20px;      // Отступы вокруг табов (из код2)
  border-radius: 8px;               // (из код2)
  padding: 4px;                     // Небольшой внутренний отступ для кнопок (из код2)
  overflow-x: auto;                 // Горизонтальная прокрутка, если табы не помещаются (из код1)
  white-space: nowrap;              // Предотвращает перенос табов на новую строку (из код1)

  // Стилизация скроллбара для Webkit из код1
  &::-webkit-scrollbar {
    height: 3px;
  }
  &::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 3px;
  }

  .tab-button {
    padding: 8px 18px; // Компактнее (из код2), код1 имел 8px 12px
    font-size: 0.95em;  // (из код2), код1 имел 14px
    font-weight: 500;   // (из код2)
    cursor: pointer;
    background-color: transparent;
    color: #e0e0e0;     // Цвет неактивного таба (из код2)
    border: none;
    // border-bottom: 3px solid transparent; // Заменено на background-color в .active
    outline: none;
    transition: color 0.3s ease, background-color 0.3s ease, border-color 0.3s ease; // (из код2)
    border-radius: 6px; // Скругление самим кнопкам табов (из код2)
    margin: 0 3px;      // Небольшой отступ между кнопками (из код2)

    &:hover {
      color: #ffffff;
      background-color: rgba(255,255,255,0.1); // (из код2)
    }

    &.active {
      color: #ffffff;
      font-weight: 600; // Жирнее для активного (из код2)
      // border-bottom-color: #00bfff; // Линия под активным табом (из код2), можно оставить если нравится
      background-color: rgba(0, 191, 255, 0.15); // Легкий фон для активного таба (из код2)
    }
  }
}

// --- ОСНОВНОЙ КОНТЕНТ ---
.discovery-tab-content {
  flex-grow: 1;
  width: 100%;
  padding: 0px 20px 20px 20px; // Отступы для контента вкладок (из код2)
  box-sizing: border-box;
  overflow-y: auto;

  // Общие стили для .tab-pane из код1
  .tab-pane {
    padding: 15px; // Общий отступ для содержимого вкладок (из код1)
    color: #fff;   // Пример цвета текста (из код1, основной цвет уже #fff из .discovery-screen)
  }
}

#task-hub-pane { // Специфичная панель из код2
  display: flex;
  flex-direction: column;
  gap: 20px; // Расстояние между секциями в Task HUB
}


// --- КНОПКИ В TASK HUB (Quest Center, Bot Zone) ---
// Стили из код2, так как они более детализированы и тематичны
// код1 имел .hub-actions-section, но стили из код2 лучше подходят
.hub-actions-section {
  display: flex;
  justify-content: center; // Центрируем кнопки (из код2)
  gap: 25px; // Расстояние между квадратными кнопками (из код2, в код1 было 15px)
  padding: 10px 0; // Уменьшим отступы (из код2)
  margin-bottom: 20px; // Отступ снизу (из код1, сохранен)

  .action-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    text-align: center;
    width: 90px; // Ширина элемента (из код2)

    .action-button-square {
      width: 65px;  // (из код2, в код1 было 60px)
      height: 65px; // (из код2, в код1 было 60px)
      background-color: rgba(0, 0, 0, 0.2); // Темнее фон (из код2, в код1 было 0.1 прозрачность)
      border: 1px solid rgba(255, 255, 255, 0.15); // Светлая граница (из код2)
      border-radius: 10px; // (из код2, также 10px в код1)
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 7px; // (из код2, в код1 было 5px)
      transition: background-color 0.2s ease, transform 0.2s ease; // (из код2)
      box-shadow: 0 2px 4px rgba(0,0,0,0.2); // (из код2)

      .action-icon {
        font-size: 1.8em; // (из код2, в код1 было 28px ~1.75em если базовый 16px)
        color: #00bfff;   // Голубая иконка (из код2, в код1 было #fff)
      }

      &:hover {
        background-color: rgba(0, 0, 0, 0.3); // (из код2, в код1 было 0.2 прозрачность)
        transform: scale(1.05); // (из код2)
      }
    }

    .action-label {
      font-size: 0.85em; // (из код2, в код1 было 12px)
      color: #e0e0e0;   // Светлый цвет подписи (из код2, в код1 было #eee)
      font-weight: 500; // (из код2)
      margin: 0;
    }
  }
}

// --- СТИЛИ ДЛЯ СЕКЦИИ LIVE PROMOS ---
// Стили из код2, так как они более детализированы и тематичны
.events-section {
  margin-top: 10px; // (из код1, сохранен)

  .section-title { // Заголовок "Live Promos:"
    text-align: left;
    font-size: 1.4em; // Уменьшим немного (из код2, в код1 было 18px ~1.125em)
    color: #ffffff;  // (из код2, также #fff в код1)
    margin-top: 15px;
    margin-bottom: 15px; // (из код2, в код1 было 10px)
    padding-bottom: 8px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.2); // Светлая линия (из код2)
    font-weight: 600; // (из код2)
  }

  .live-events-grid {
    display: grid;
    // grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); // Адаптивная сетка (из код1)
    grid-template-columns: 1fr; // Из код2 для мобильных по умолчанию
    gap: 12px; // (из код2, в код1 было 10px)
    margin-bottom: 40px;

    @media (min-width: 600px) { // Медиа-запрос из код2
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    }

    .live-event-button {
      // background-color: rgba(255, 255, 255, 0.1); // Из код1, заменено градиентом из код2
      background: linear-gradient(135deg, #483D8B 0%, #6A5ACD 50%, #9370DB 100%); // Из код2
      border: 1px solid rgba(255, 255, 255, 0.1); // Из код2 (в код1 было 0.2)
      color: #ffffff; // (из код2, также #fff в код1)
      padding: 15px; // (из код2, в код1 было 10px)
      font-size: 1em; // (из код2)
      font-weight: 600; // (из код2)
      border-radius: 8px; // (из код2, также 8px в код1)
      cursor: pointer;
      text-align: center;
      transition: all 0.2s ease-out; // (из код2)
      width: 100%;
      min-height: 80px; // (из код2)
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1.3;
      box-shadow: 0 2px 5px rgba(0,0,0,0.15); // (из код2)

      &:hover {
        // background-color: rgba(255, 255, 255, 0.2); // Из код1, заменено стилями из код2
        background-color: rgba(0, 0, 0, 0.35); // Из код2 (темнее фон при наведении)
        border-color: rgba(255, 255, 255, 0.2); // Из код2
        transform: translateY(-2px); // Из код2
      }
    }

    .no-events-info {
      color: #bdc3c7; // (из код2, в код1 было #aaa)
      text-align: center;
      padding: 20px;
      font-style: italic;
      grid-column: 1 / -1; // (из код2)
    }
  }
}