// ===========================================================
// === СТИЛИ ДЛЯ ForgeItemInfoPopup.jsx (информация о предмете из кузницы) ===
// ===========================================================

// Переменные (если они не определены глобально, определи их здесь или в отдельном файле _variables.scss)
// Примерный набор переменных, который мог использоваться в твоих оригинальных стилях:
$item-popup-bg-start: #2f3949;
$item-popup-bg-end: #212833;
$divider-color-dark: rgba(120, 130, 160, 0.2);
$text-primary-light: #e0e5f0;
$text-secondary-light: #c0c8d4;
$text-muted-light: #9098a8;
$golden-banner-bg: #daa520; // Пример золотого цвета
$golden-banner-text-dark: #2c3e50; // Темный текст для золотого фона
$background-element-dark: rgba(0, 0, 0, 0.2);

// Цвета редкости (пример)
$rarity-colors: (
    common: #9e9e9e,
    uncommon: #64b5f6,
    rare: #42a5f5,
    epic: #ab47bc,
    legendary: #ff9800,
    mythic: #f44336
);

// Оверлей попапа
.item-popup-backdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100dvh; // Используем dvh для мобильных устройств
    background: rgba(0, 0, 0, 0.85); // Фон чуть темнее
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 200; // Убедись, что z-index достаточно высокий
    padding: 15px;
    box-sizing: border-box;
}

// Основной контейнер контента попапа
.item-popup-content {
    width: 370px; // Немного стандартная ширина для информационных попапов
    max-width: 95vw;
    background: linear-gradient(160deg, $item-popup-bg-start, $item-popup-bg-end);
    border: 1px solid rgba(120, 130, 160, 0.3);
    border-radius: 12px;
    color: $text-primary-light;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.6);
    position: relative;
    display: flex;
    flex-direction: column;
    max-height: 90vh; // Максимальная высота с учетом отступов
    overflow: hidden; // Важно, чтобы внутренний скролл работал корректно

    // Шапка попапа (баннеры имени и типа)
    .custom-popup-header {
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 25px 15px 15px 15px; // Верхний отступ для "выезжающего" баннера
        gap: 8px;
        border-bottom: 1px solid $divider-color-dark;
        width: 100%;
        box-sizing: border-box;
        flex-shrink: 0; // Шапка не должна сжиматься

        .item-name-banner {
            display: inline-block;
            padding: 8px 20px; // Паддинги для баннера
            border-radius: 8px;
            color: white;
            font-size: 18px; // Размер шрифта для имени
            font-weight: 700;
            text-align: center;
            box-shadow: 0 5px 12px rgba(0, 0, 0, 0.5);
            z-index: 3;
            max-width: 80%; // Ограничение ширины баннера
            margin-top: -45px; // "Выезд" баннера вверх (подбери значение)
                               // Это значение должно быть примерно равно (padding-top .custom-popup-header + половина высоты баннера)

            @each $rarity, $color in $rarity-colors {
                &.rarity-bg-#{$rarity} {
                    background-color: $color;
                    color: if(lightness($color) > 60%, #111, white); // Контрастный цвет текста
                }
            }
        }

        .item-type-banner {
            display: inline-block;
            background-color: $golden-banner-bg;
            color: $golden-banner-text-dark;
            padding: 5px 15px;
            border-radius: 6px;
            font-size: 15px;
            font-weight: 500;
            text-transform: capitalize;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }
    }

    // Тело попапа (основной контент со скроллом)
    .popup-body {
        padding: 15px 20px;
        overflow-y: auto; // Включаем скролл для тела, если контента много
        flex-grow: 1; // Тело занимает все доступное пространство

        .popup-content-stack {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 18px; // Отступы между блоками контента
            width: 100%;
        }

        .icon-description-row {
            display: flex;
            flex-direction: row;
            align-items: flex-start;
            gap: 15px;
            width: 100%;

            .icon-column {
                flex: 0 0 90px; // Фиксированная ширина для колонки с иконкой

                .popup-icon-area {
                    width: 90px;
                    height: 90px;
                    padding: 6px;
                    border-radius: 8px; // Скругление углов
                    border: 2px solid transparent;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    box-sizing: border-box;

                    @each $rarity, $color in $rarity-colors {
                        &.rarity-#{$rarity} {
                            border-color: $color;
                            background: radial-gradient(ellipse at center, lighten($color, 18%), darken($color, 22%));
                        }
                    }

                    .popup-icon {
                        max-width: 100%;
                        max-height: 100%;
                        object-fit: contain;
                        // image-rendering: pixelated; // Если пиксель-арт
                    }
                }
            }

            .description-column {
                flex: 1;
                min-width: 0;

                .popup-description-area {
                    background-color: rgba(0, 0, 0, 0.2); // Фон для блока описания
                    padding: 12px 15px;
                    border-radius: 6px;
                    width: 100%;
                    box-sizing: border-box;
                    font-size: 14px; // Размер шрифта описания
                    line-height: 1.5;
                    color: $text-secondary-light;

                    p {
                        margin: 0;
                    }
                }
            }
        }

        .stats-block {
            background-color: rgba(0, 0, 0, 0.2); // Фон для блока статов
            padding: 15px;
            border-radius: 8px;
            width: 100%;
            box-sizing: border-box;

            .stats-comparison-table { // Название класса можно оставить, но это уже не сравнение
                display: grid;
                // Оставляем 4 колонки, т.к. renderBaseStatRow генерирует пустые ячейки для выравнивания
                grid-template-columns: minmax(100px, 1.7fr) 1fr auto 1fr;
                column-gap: 8px;
                row-gap: 6px;
                font-size: 14px; // Размер шрифта для статов
                width: 100%;
                align-items: center;

                .stat-name-cell {
                    justify-content: flex-start;
                    color: $text-muted-light;
                }

                .current-value-cell {
                    // Инлайн стиль из JSX был: style={{ justifyContent: 'flex-start', paddingLeft: '10px' }}
                    justify-content: flex-start; // Выравниваем значение по левому краю
                    padding-left: 10px;         // Отступ слева для значения
                    font-weight: 600;
                    color: $text-primary-light;
                }

                // .arrow-cell и .next-value-cell будут пустыми, но занимают место в гриде
                .arrow-cell, .next-value-cell {
                    // Можно добавить visibility: hidden; если они не должны влиять на расчеты, но это обычно не нужно
                }
            }
        }
        
        .no-stats-message {
            padding: 10px 0;
            text-align: center;
            color: $text-muted-light;
            font-size: 14px;
            font-style: italic;
        }

        .popup-set-bonus-area {
            width: 100%;
            font-size: 13px;
            line-height: 1.5;
            color: $text-muted-light;
            padding: 10px 15px;
            background-color: rgba(0,0,0,0.1);
            border-radius: 6px;

            h4 {
                font-size: 14px;
                font-weight: 600;
                color: $text-secondary-light;
                margin: 0 0 6px 0;
            }
            p { margin: 0; &:not(:last-child) { margin-bottom: 5px; } }
        }

        .popup-divider { // Разделитель между блоками
            border: none;
            height: 1px;
            background-color: $divider-color-dark;
            width: 100%;
            margin: 0; // gap в .popup-content-stack уже дает отступы
        }
    }

    // Футер попапа (кнопка "Закрыть")
    .popup-buttons {
        padding: 15px 20px; // Отступы для футера
        border-top: 1px solid $divider-color-dark;
        background-color: rgba(0, 0, 0, 0.1); // Легкий фон для футера
        flex-shrink: 0; // Футер не должен сжиматься
        border-radius: 0 0 11px 11px; // Скругление только нижних углов, если шапка тоже скруглена


        .action-button-row {
            width: 100%;
            display: flex;
            justify-content: center; // Центрируем кнопку, если она не на всю ширину

            .button-close-forge-info {
                min-width: 180px; // Минимальная ширина кнопки
                width: auto;      // Ширина по контенту + паддинги
                padding: 10px 30px; // Увеличенные паддинги для "большой" кнопки
                font-size: 16px;
                font-weight: 600;
                color: $text-primary-light;
                background: linear-gradient(180deg, #5a6268, #495057); // Темно-серый градиент
                border: 1px solid #41464b;
                border-radius: 8px;
                cursor: pointer;
                transition: all 0.2s ease;
                box-shadow: 0 2px 4px rgba(0,0,0,0.2);

                &:hover {
                    background: linear-gradient(180deg, #646c74, #52585e);
                    border-color: #4a5056;
                    transform: translateY(-1px); // Небольшой эффект при наведении
                    box-shadow: 0 3px 6px rgba(0,0,0,0.25);
                }

                &:active {
                    background: linear-gradient(180deg, #495057, #5a6268);
                    transform: translateY(0px);
                    box-shadow: 0 1px 2px rgba(0,0,0,0.2);
                }

                &:focus {
                    outline: none;
                    box-shadow: 0 0 0 3px rgba(108, 117, 125, 0.4); // Фокус как у Bootstrap
                }
            }
        }
    }
}